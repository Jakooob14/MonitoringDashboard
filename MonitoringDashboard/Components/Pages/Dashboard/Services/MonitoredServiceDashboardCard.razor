@using MonitoringDashboard.Components.Shared
@inherits MonitoringDashboard.Components.Shared.MonitoredService.MonitoredServiceCardBase
@inject NavigationManager Nav

<div class="@($"bg-neutral-800 hover:bg-neutral-800/70 text-zinc-100 rounded-sm flex flex-col gap-4 shadow-lg border-s-4 border border-zinc-700 relative {(ServiceUp ? "border-s-green-500" : "border-s-red-500")}")">
    <NavLink Href="@($"/dashboard/services/{MonitoredService.Id}")" class="absolute top-0 left-0 w-full h-full z-10"></NavLink>
    <div class="p-6 flex flex-col gap-4 shadow-lg relative">
        <div class="flex justify-between items-center flex-wrap">
            <div>
                <h2 class="text-2xl font-bold">@MonitoredService.Name</h2>
                @* <span class="text-zinc-400 bg-[hsl(240,4%,20%)] border border-zinc-600 px-2 rounded-sm">HTTP</span> *@
                <span class="text-zinc-400">@FormattedUptime</span>
            </div>
            <ServiceStatusBar Statuses="Statuses" FixedBarWidth="5"/>
        </div>

        <hr class="border-zinc-700 my-2"/>

        <div class="flex gap-2 flex-wrap">
            <NavLink class="button-primary flex items-center gap-2 text-sm font-medium z-20" Href=@($"/dashboard/services/edit/{MonitoredService.Id}")>
                <Icon Path="icons/pen.svg"/>
                Edit
            </NavLink>

            <button class="button-primary flex items-center gap-2 text-sm font-medium text-red-400 transition-colors z-20"
                    @onclick="() => _deleteModalOpen = true">
                <Icon Path="icons/trash-can.svg"/>
                Delete
            </button>
        </div>
    </div>
</div>

<Modal @bind-IsOpen="_deleteModalOpen" 
       Title="Delete Service" 
       OnConfirm="HandleDeleteConfirm" 
       ConfirmButtonText="Delete"
       ConfirmButtonClass="bg-red-500 hover:bg-red-600 !text-zinc-100">
    <p>Are you sure you want to delete this service?</p>
</Modal>